<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>GPT-4o AI å›¾åƒç”Ÿæˆä»»åŠ¡è¡¨å•</title>
  <style>
    /* --- Styles --- */
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; padding: 40px; background-color: #f5f5f5; color: #333; line-height: 1.6; }
    h1 { color: #222; text-align: center; margin-bottom: 30px; font-size: 2.2em; }
    h2 { border-bottom: 1px solid #eee; padding-bottom: 10px; margin-top: 0; margin-bottom: 25px; font-size: 1.4em; color: #333; }
    h3 { margin-top: 0; margin-bottom: 15px; font-size: 1.2em; border-bottom: none; color: #333; }
    h4 { margin-top: 0; margin-bottom: 15px; color: #555; font-size: 1.1em; }
    label { font-weight: bold; display: block; margin-top: 15px; margin-bottom: 6px; }
    input[type="text"], input[type="number"], input[type="url"], input[type="color"], textarea, select { width: 100%; padding: 10px; margin-bottom: 16px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 1em; }
    input[type="color"] { padding: 5px; height: 40px; }
    input[type="file"] { padding: 8px 6px; border: 1px solid #ccc; border-radius: 4px; width: 100%; box-sizing: border-box; margin-bottom: 10px; display: block; font-size: 0.95em; background-color: #fff; }
    .form-section { background-color: #fff; padding: 24px 30px; border-radius: 8px; margin-bottom: 32px; box-shadow: 0 3px 8px rgba(0,0,0,0.07); }
    .submit-btn, .add-btn, .remove-btn, .copy-btn { background-color: #4CAF50; color: white; padding: 10px 18px; font-size: 1em; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px; transition: background-color 0.2s, transform 0.1s ease; text-decoration: none; display: inline-block; vertical-align: middle; }
    .submit-btn { padding: 14px 24px; font-size: 1.1em; font-weight: bold; display: block; width: 100%; max-width: 300px; margin: 30px auto 10px; }
    .add-btn { background-color: #007bff; margin-top: 5px; }
    .remove-btn { background-color: #dc3545; font-size: 0.85em; padding: 5px 10px; line-height: 1.4; }
    .copy-btn { background-color: #5cb85c; padding: 12px 25px; font-size: 1.05em; }
    .submit-btn:hover { background-color: #45a049; transform: scale(1.02); }
    .add-btn:hover { background-color: #0056b3; transform: scale(1.03); }
    .remove-btn:hover { background-color: #c82333; transform: scale(1.05);}
    .copy-btn:hover { background-color: #4cae4c; transform: scale(1.03); }
    .note { font-size: 0.9em; color: #666; margin-top: -6px; margin-bottom: 18px; line-height: 1.5; }
    .checkbox-container { display: flex; align-items: center; margin-top: 12px; margin-bottom: 18px; }
    .checkbox-container input[type="checkbox"] { width: auto; margin: 0 10px 0 2px; }
    .checkbox-container label { margin: 0; font-weight: normal; display: inline; }
    .dimension-inputs { display: flex; gap: 15px; align-items: flex-end; }
    .dimension-inputs > div { flex: 1; }
    .dimension-inputs label { margin-bottom: 4px; }
    #product-container, #reference-container, #copy-container { margin-top: 15px; }
    .product-item, .reference-item, .copy-item { border: 1px dashed #ddd; padding: 15px 15px 20px 15px; margin-bottom: 20px; border-radius: 5px; background-color: #fafafa; position: relative; }
    .product-item label, .reference-item label, .copy-item label { font-size: 0.9em; margin-top: 10px; }
    .product-item input[type="text"], .reference-item input[type="file"], .reference-item input[type="url"], .reference-item textarea, .copy-item textarea, .copy-item input[type="text"], .copy-item input[type="color"], .copy-item select { margin-bottom: 10px; }
    .copy-item .copy-controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; align-items: end; margin-top: 10px; }
    .copy-item .copy-controls > div { margin-bottom: 0; }
    .copy-item .copy-controls label { margin-bottom: 4px; }
    .product-item .remove-btn, .reference-item .remove-btn, .copy-item .remove-btn { position: absolute; top: 10px; right: 10px; }
    .reference-item p.note, .copy-item p.note, .product-item p.note { margin-top: -2px; margin-bottom: 10px; font-size: 0.85em; }
    .copy-item .copy-controls input:disabled, .copy-item .copy-controls select:disabled { background-color: #e9ecef; cursor: not-allowed; opacity: 0.7; }
    #product_relations_container { margin-top: 25px; padding-top: 20px; border-top: 1px solid #eee; }

    /* --- Prompt Output Styles --- */
    #prompt-display-section { background-color: #fff; padding: 24px 30px; border-radius: 8px; margin-top: 32px; box-shadow: 0 3px 8px rgba(0,0,0,0.07); border: 1px solid #4CAF50; }
    /* Style for the list of files to upload */
    #files-to-upload-section { margin-bottom: 20px; padding: 15px; background-color: #fffadf; border: 1px solid #ffecb3; border-radius: 5px; }
    #files-to-upload-section h4 { margin-top: 0; margin-bottom: 10px; color: #8a6d3b; font-size: 1.1em; }
    #files-to-upload-list { list-style-type: 'ğŸ“‚'; padding-left: 25px; margin: 0; color: #555; }
    #files-to-upload-list li { margin-bottom: 5px; }
    #files-to-upload-list code { background-color: #eee; padding: 2px 5px; border-radius: 3px; font-size: 0.95em; }

    /* Style for the actual prompt text to be copied */
    #prompt-output { background-color: #e9f5e9; border: 1px solid #c8e6c9; border-radius: 4px; padding: 15px; white-space: pre-wrap; word-wrap: break-word; font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace; font-size: 0.95em; line-height: 1.7; max-height: 450px; overflow-y: auto; margin-bottom: 20px; color: #1b5e20; }
    .copy-btn-container { text-align: center; margin-top: 15px; margin-bottom: 15px; }
    #copy-prompt-btn .copy-icon { margin-right: 8px; font-size: 1.1em; vertical-align: middle; }
    #post-generation-instructions { text-align: center; font-size: 1em; color: #555; }
    #post-generation-instructions a, #prompt-display-section > p a { color: #007bff; text-decoration: none; font-weight: bold; }
    #post-generation-instructions a:hover, #prompt-display-section > p a:hover { text-decoration: underline; }
    #prompt-display-section > p.user-instruction { font-size: 1.05em; line-height: 1.7; margin-bottom: 15px; } /* Style for user instruction paragraph */
    strong { color: #d9534f; font-weight: bold; }

  </style>
</head>
<body>

  <h1>GPT-4o ç”Ÿå›¾ Prompt æ¨¡ç‰ˆ</h1>

  <form id="image-gen-form">

    <!-- Section 1: Product Info (Dynamic) -->
    <div class="form-section">
      <h2>1. äº§å“ä¿¡æ¯ (æœ€å¤š5ä¸ª)</h2>
      <p class="note">è¯·è‡³å°‘æä¾›ä¸€ä¸ªäº§å“ã€‚å¦‚éœ€ç”ŸæˆåŒ…å«å¤šä¸ªäº§å“çš„å›¾ç‰‡ï¼Œè¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ·»åŠ ã€‚</p>
      <div id="product-container">
        <!-- Product 1 (Default) -->
        <div class="product-item" data-index="1">
            <h4>äº§å“ 1</h4>
            <label for="product_name_1">äº§å“åç§°ï¼ˆä¸­è‹±æ–‡ï¼‰</label>
            <input type="text" id="product_name_1" name="product_name_1" required placeholder="ä¾‹å¦‚ï¼šæ™ºèƒ½ä¿æ¸©æ¯ Smart Thermal Mug">

            <!-- MODIFIED: Single Product PNG Upload -->
            <label for="product_png_1">ä¸Šä¼ äº§å“é€æ˜å›¾ (PNG)</label>
            <input type="file" id="product_png_1" name="product_png_1" accept="image/png" required>
            <p class="note">è¯·ç¡®ä¿å›¾ç‰‡èƒŒæ™¯é€æ˜ã€‚</p>
            <!-- End Modification -->

            <label for="model_file_1" style="margin-top: 15px;">ä¸Šä¼ äº§å“3Dæ¨¡å‹æˆ–çº¹ç†åŒ…ï¼ˆå¯é€‰ï¼‰</label>
            <input type="file" id="model_file_1" name="model_file_1" accept=".zip,.glb,.fbx,.obj,.mtl">
            <p class="note">æä¾›æ¨¡å‹æœ‰åŠ©äºæ›´ç²¾ç¡®è¿˜åŸã€‚</p>
        </div>
        <!-- More products added here -->
      </div>
      <button type="button" id="add-product-btn" class="add-btn">æ·»åŠ æ›´å¤šäº§å“</button>
      <p id="product-limit-msg" class="note" style="color: red; display: none; margin-top: 10px;">æœ€å¤šæ·»åŠ  5 ä¸ªäº§å“ã€‚</p>
      <div id="product_relations_container" style="display: none;">
          <label for="product_relations">å¤šäº§å“å…³ç³»ä¸å¸ƒå±€æè¿° (è‹¥æ·»åŠ äº†å¤šä¸ªäº§å“)</label>
          <textarea id="product_relations" name="product_relations" rows="4" placeholder="æè¿°äº§å“é—´çš„äº’åŠ¨æˆ–ä½ç½®å…³ç³»..."></textarea>
          <p class="note">æè¿°è¶Šæ¸…æ™°ï¼ŒAIè¶Šèƒ½ç†è§£äº§å“é—´çš„å¸ƒå±€å’ŒåŠŸèƒ½è”ç³»ã€‚</p>
      </div>
    </div>

    <!-- Section 2: Reference Images (Dynamic) -->
    <div class="form-section">
        <h2>2. å‚è€ƒå›¾ (å¯é€‰, æœ€å¤š10å¼ )</h2>
        <p class="note">ä¸Šä¼ å›¾ç‰‡æˆ–é“¾æ¥ä½œä¸ºé£æ ¼ã€æ„å›¾ã€å…‰å½±æˆ–å…ƒç´ å‚è€ƒã€‚è¯·ä¸ºæ¯å¼ å‚è€ƒå›¾æ·»åŠ è¯´æ˜ã€‚</p>
        <div id="reference-container"></div>
        <button type="button" id="add-reference-btn" class="add-btn">æ·»åŠ å‚è€ƒå›¾</button>
        <p id="reference-limit-msg" class="note" style="color: red; display: none; margin-top: 10px;">æœ€å¤šæ·»åŠ  10 å¼ å‚è€ƒå›¾ã€‚</p>
    </div>

    <!-- Section 3: Image Purpose -->
    <div class="form-section">
      <h2>3. å›¾åƒç”¨é€”</h2>
      <label for="scene_purpose">é€‰æ‹©ä¸»è¦ç”¨é€”ï¼ˆå•é€‰ï¼‰</label>
      <select id="scene_purpose" name="scene_purpose">
        <optgroup label="ç”µå•†å¹³å°">
            <option value="å¤©çŒ«ä¸»å›¾">å¤©çŒ«ä¸»å›¾</option>
            <option value="å¤©çŒ«è¯¦æƒ…é¡µ">å¤©çŒ«è¯¦æƒ…é¡µ</option>
            <option value="äº¬ä¸œä¸»å›¾">äº¬ä¸œä¸»å›¾</option>
            <option value="äº¬ä¸œè¯¦æƒ…é¡µ">äº¬ä¸œè¯¦æƒ…é¡µ</option>
            <option value="äºšé©¬é€Šä¸»å›¾">äºšé©¬é€Šä¸»å›¾</option>
            <option value="Shopify ä¸»å›¾/è¯¦æƒ…é¡µ">Shopify ä¸»å›¾/è¯¦æƒ…é¡µ</option>
            <option value="å°ç¨‹åºå•†å“å±•ç¤ºå›¾">å°ç¨‹åºå•†å“å±•ç¤ºå›¾</option>
            <option value="è·¨å¢ƒç”µå•†å¹³å°å›¾ (Walmart/eBay/Shopee/Lazada)">è·¨å¢ƒç”µå•†å¹³å°å›¾ (Walmart/eBay/Shopee/Lazada)</option>
            <option value="ç”µå•†Bannerå›¾ (èŠ‚æ—¥/æ´»åŠ¨ç­‰)">ç”µå•†Bannerå›¾ (èŠ‚æ—¥/æ´»åŠ¨ç­‰)</option>
        </optgroup>
        <optgroup label="ç¤¾äº¤åª’ä½“ & å¹¿å‘Š">
            <option value="ç¤¾äº¤åª’ä½“å®£ä¼ å›¾ (é€šç”¨)">ç¤¾äº¤åª’ä½“å®£ä¼ å›¾ (é€šç”¨)</option>
            <option value="Instagram Feed Post">Instagram Feed Post</option>
            <option value="Instagram Story">Instagram Story</option>
            <option value="Facebook Feed Post">Facebook Feed Post</option>
            <option value="å°çº¢ä¹¦ç¬”è®°é…å›¾">å°çº¢ä¹¦ç¬”è®°é…å›¾</option>
            <option value="å¾®ä¿¡å…¬ä¼—å·å›¾æ–‡é…å›¾">å¾®ä¿¡å…¬ä¼—å·å›¾æ–‡é…å›¾</option>
             <option value="Google Ads å±•ç¤ºå¹¿å‘Š">Google Ads å±•ç¤ºå¹¿å‘Š</option>
             <option value="Facebook Ads å›¾ç‰‡ç´ æ">Facebook Ads å›¾ç‰‡ç´ æ</option>
        </optgroup>
        <optgroup label="è§†é¢‘ç›¸å…³">
            <option value="çŸ­è§†é¢‘å°é¢å›¾ (æŠ–éŸ³/YouTube/Reels)">çŸ­è§†é¢‘å°é¢å›¾ (æŠ–éŸ³/YouTube/Reels)</option>
            <option value="è§†é¢‘ä¸­æ’å›¾æˆ–èƒŒæ™¯æ¿">è§†é¢‘ä¸­æ’å›¾/èƒŒæ™¯æ¿</option>
        </optgroup>
        <optgroup label="è®¾è®¡ & å°åˆ·">
            <option value="äº§å“åŒ…è£…è®¾è®¡å›¾">äº§å“åŒ…è£…è®¾è®¡å›¾</option>
            <option value="äº§å“æ¦‚å¿µå›¾/è‰å›¾">äº§å“æ¦‚å¿µå›¾/è‰å›¾</option>
            <option value="çº¿ä¸‹ç‰©æ–™ (æµ·æŠ¥/å±•æ¶/æ‰‹å†Œ)">çº¿ä¸‹ç‰©æ–™ (æµ·æŠ¥/å±•æ¶/æ‰‹å†Œ)</option>
             <option value="å°åˆ·å“ (åç‰‡/ä¼ å•)">å°åˆ·å“ (åç‰‡/ä¼ å•)</option>
            <option value="æŠ¥ä»·å•ã€å®£ä¼ å†Œæ’å›¾">æŠ¥ä»·å•/å®£ä¼ å†Œæ’å›¾</option>
        </optgroup>
         <optgroup label="å…¶ä»–ç”¨é€”">
            <option value="PPTå®£ä¼ /æ‹›å•†èµ„æ–™">PPTå®£ä¼ /æ‹›å•†èµ„æ–™</option>
            <option value="Appå†…å±•ç¤ºå›¾ (iOS/Android)">Appå†…å±•ç¤ºå›¾ (iOS/Android)</option>
            <option value="ç½‘ç«™é¦–é¡µè½®æ’­å›¾">ç½‘ç«™é¦–é¡µè½®æ’­å›¾</option>
            <option value="å…¶ä»–">å…¶ä»–</option>
         </optgroup>
      </select>
      <label for="purpose_other">å…¶ä»–ç”¨é€”å¤‡æ³¨</label>
      <input type="text" id="purpose_other" name="purpose_other" placeholder="è‹¥ä¸Šæ–¹é€‰æ‹©â€œå…¶ä»–â€ï¼Œè¯·åœ¨æ­¤å¤„è¯¦ç»†è¯´æ˜">
    </div>

    <!-- Section 4: Background & Style Preferences -->
    <div class="form-section">
        <h2>4. èƒŒæ™¯ä¸é£æ ¼åå¥½</h2>
        <label for="background_style">èƒŒæ™¯é£æ ¼ï¼ˆå•é€‰ï¼‰</label>
        <select id="background_style" name="background_style">
             <optgroup label="å®¤å†…åœºæ™¯">
                <option value="åŒ—æ¬§é£å§å®¤">åŒ—æ¬§é£å§å®¤</option>
                <option value="æ—¥å¼æœ¨è´¨åœ°æ¿">æ—¥å¼æœ¨è´¨åœ°æ¿</option>
                <option value="ç°ä»£ç®€çº¦å®¢å…">ç°ä»£ç®€çº¦å®¢å…</option>
                <option value="è½»å¥¢ä¹¦æˆ¿">è½»å¥¢ä¹¦æˆ¿</option>
                <option value="æ¸©é¦¨å’–å•¡é¦†è§’è½">æ¸©é¦¨å’–å•¡é¦†è§’è½</option>
                <option value="å·¥ä¸šé£å·¥ä½œå®¤">å·¥ä¸šé£å·¥ä½œå®¤</option>
                <option value="å„¿ç«¥æˆ¿">å„¿ç«¥æˆ¿</option>
                <option value="å¨æˆ¿å°é¢">å¨æˆ¿å°é¢</option>
                <option value="å«ç”Ÿé—´æ´—æ‰‹å°">å«ç”Ÿé—´æ´—æ‰‹å°</option>
                <option value="åŠå…¬æ¡Œé¢">åŠå…¬æ¡Œé¢</option>
                <option value="å®éªŒå®¤/æ´å‡€å®¤å°é¢">å®éªŒå®¤/æ´å‡€å®¤å°é¢</option>
                <option value="å‚¨ç‰©æŸœæˆ–è§’è½é™ˆåˆ—æ¶">å‚¨ç‰©æŸœ/è§’è½é™ˆåˆ—æ¶</option>
            </optgroup>
            <optgroup label="æˆ·å¤–åœºæ™¯">
                <option value="å…¬å›­è‰åœ°">å…¬å›­è‰åœ°</option>
                <option value="é˜³å°æ™¨å…‰">é˜³å°æ™¨å…‰</option>
                <option value="èŠ±å›­æ¡Œé¢">èŠ±å›­æ¡Œé¢</option>
                <option value="æ£®æ—/ä¸›æ—èƒŒæ™¯">æ£®æ—/ä¸›æ—èƒŒæ™¯</option>
                <option value="é›ªåœ°åœºæ™¯">é›ªåœ°åœºæ™¯</option>
                <option value="æ¹–è¾¹/æ²³å²¸">æ¹–è¾¹/æ²³å²¸</option>
                <option value="å±±é¡¶/è¿œçœº">å±±é¡¶/è¿œçœº</option>
                <option value="è½åœ°çª—å‰é˜³å…‰">è½åœ°çª—å‰é˜³å…‰</option>
                <option value="å‚æ™šåº­é™¢ç¯å…‰">å‚æ™šåº­é™¢ç¯å…‰</option>
                <option value="æ²™æ»©æˆ–é‡è¥åœºæ™¯">æ²™æ»©/é‡è¥</option>
                <option value="åŸå¸‚è¡—å¤´æˆ–å’–å•¡é¦†å¤–æ‘†">è¡—å¤´/å’–å•¡é¦†å¤–æ‘†</option>
            </optgroup>
            <optgroup label="æè´¨/æŠ½è±¡/ç‰¹æ•ˆç±»">
                <option value="æ¸…æ–°ç»¿æ¤è£…é¥°èƒŒæ™¯">æ¸…æ–°ç»¿æ¤è£…é¥°</option>
                <option value="æ¯›æ¯¯/æ£‰éº»æè´¨èƒŒæ™¯">æ¯›æ¯¯/æ£‰éº»æè´¨</option>
                <option value="æœ¨çº¹/çŸ³æè´¨æ„Ÿç‰¹å†™">æœ¨çº¹/çŸ³æè´¨æ„Ÿ</option>
                <option value="æ°´/æ¶²ä½“é£æº…èƒŒæ™¯">æ°´/æ¶²ä½“é£æº…</option>
                <option value="çƒŸé›¾/äº‘é›¾æ•ˆæœ">çƒŸé›¾/äº‘é›¾æ•ˆæœ</option>
                <option value="å‡ ä½•å›¾æ¡ˆèƒŒæ™¯">å‡ ä½•å›¾æ¡ˆèƒŒæ™¯</option>
                <option value="æ¨¡ç³Šæ•£æ™¯ (Bokeh)">æ¨¡ç³Šæ•£æ™¯ (Bokeh)</option>
                <option value="æš—è°ƒå¸ƒæ™¯">æš—è°ƒå¸ƒæ™¯</option>
                <option value="ç‚«å…‰æ¸å˜">ç‚«å…‰æ¸å˜</option>
                <option value="é«˜ç§‘æŠ€è™šæ‹Ÿåœºæ™¯">é«˜ç§‘æŠ€è™šæ‹Ÿ</option>
                <option value="æ‰‹ç»˜æ’ç”»é£èƒŒæ™¯">æ‰‹ç»˜æ’ç”»é£</option>
                <option value="æç®€çº¯è‰²èƒŒæ™¯">æç®€çº¯è‰²</option>
            </optgroup>
             <option value="å…¶ä»–">å…¶ä»–</option>
        </select>
        <label for="background_other">å…¶ä»–èƒŒæ™¯é£æ ¼å¤‡æ³¨</label>
        <input type="text" id="background_other" name="background_other" placeholder="è‹¥ä¸Šæ–¹é€‰æ‹©â€œå…¶ä»–â€ï¼Œè¯·åœ¨æ­¤å¤„è¯¦ç»†è¯´æ˜">

        <label style="margin-top: 25px;">å›¾ç‰‡é£æ ¼ï¼ˆå¯é€‰ï¼Œå¯ç»„åˆé€‰æ‹©ï¼‰</label>
        <p class="note" style="margin-bottom: 10px;">é€‰æ‹©ç¬¦åˆæœŸæœ›çš„å…³é”®è¯ï¼ŒAIä¼šå°è¯•èåˆã€‚</p>
        <label for="style_space">ç©ºé—´æ„Ÿ/æ°›å›´ç±»</label>
        <select id="style_space" name="style_space"> <option value="">ï¼ˆä¸æŒ‡å®šï¼‰</option> <option value="æ²‰æµ¸æ„Ÿ">æ²‰æµ¸æ„Ÿ</option> <option value="é«˜çº§æ„Ÿ">é«˜çº§æ„Ÿ</option> <option value="æ²»æ„ˆé£">æ²»æ„ˆé£</option> <option value="èˆ’é€‚æ°›å›´">èˆ’é€‚æ°›å›´</option> <option value="æ¸…çˆ½è‡ªç„¶">æ¸…çˆ½è‡ªç„¶</option> <option value="æ¾å¼›æ„Ÿ">æ¾å¼›æ„Ÿ</option> <option value="å±…å®¶æ¸©é¦¨">å±…å®¶æ¸©é¦¨</option> <option value="æ´»åŠ›/åŠ¨æ„Ÿ">æ´»åŠ›/åŠ¨æ„Ÿ</option> <option value="å®é™/ç¦…æ„">å®é™/ç¦…æ„</option> <option value="æ¢¦å¹»æ„Ÿ">æ¢¦å¹»æ„Ÿ</option> <option value="ç¥ç§˜æ„Ÿ">ç¥ç§˜æ„Ÿ</option> <option value="å²è¯—æ„Ÿ">å²è¯—æ„Ÿ</option> <option value="æœªæ¥æ„Ÿ / èµ›åšé£">æœªæ¥æ„Ÿ/èµ›åš</option> <option value="å¤å¤ç¾å­¦">å¤å¤ç¾å­¦</option> <option value="åŸç”Ÿæ€é£">åŸç”Ÿæ€é£</option> </select>
        <label for="style_light">å…‰å½±ç±»</label>
        <select id="style_light" name="style_light"> <option value="">ï¼ˆä¸æŒ‡å®šï¼‰</option> <option value="æŸ”å…‰æ¼«å°„">æŸ”å…‰æ¼«å°„</option> <option value="ç¡¬å…‰/è¾¹ç¼˜é”åˆ©">ç¡¬å…‰/è¾¹ç¼˜é”åˆ©</option> <option value="æ—¥è½é‡‘å…‰">æ—¥è½é‡‘å…‰</option> <option value="é˜´å½±å¯¹æ¯”å¼ºçƒˆ">é˜´å½±å¯¹æ¯”å¼ºçƒˆ</option> <option value="ä¼¦å‹ƒæœ—å…‰">ä¼¦å‹ƒæœ—å…‰</option> <option value="è‡ªç„¶é€†å…‰">è‡ªç„¶é€†å…‰</option> <option value="ä¸è¾¾å°”æ•ˆåº”/ä½“ç§¯å…‰">ä¸è¾¾å°”æ•ˆåº”/ä½“ç§¯å…‰</option> <option value="é•œé¢åå°„">é•œé¢åå°„</option> <option value="å±€éƒ¨èšå…‰">å±€éƒ¨èšå…‰</option> <option value="éœ“è™¹ç¯å…‰">éœ“è™¹ç¯å…‰</option> <option value="çƒ›å…‰/ç«å…‰">çƒ›å…‰/ç«å…‰</option> </select>
        <label for="style_composition">æ„å›¾ç±»</label>
        <select id="style_composition" name="style_composition"> <option value="">ï¼ˆä¸æŒ‡å®šï¼‰</option> <option value="å±…ä¸­æ„å›¾">å±…ä¸­æ„å›¾</option> <option value="ç•™ç™½æ„å›¾">ç•™ç™½æ„å›¾</option> <option value="å¯¹ç§°æ„å›¾">å¯¹ç§°æ„å›¾</option> <option value="é»„é‡‘åˆ†å‰²/ä¸‰åˆ†æ³•">é»„é‡‘åˆ†å‰²/ä¸‰åˆ†æ³•</option> <option value="å¯¹è§’çº¿æ„å›¾">å¯¹è§’çº¿æ„å›¾</option> <option value="æ¡†å¼æ„å›¾">æ¡†å¼æ„å›¾</option> <option value="å¼•å¯¼çº¿æ„å›¾">å¼•å¯¼çº¿æ„å›¾</option> <option value="æ•£ç‚¹æ„å›¾">æ•£ç‚¹æ„å›¾ (Scattered)</option> <option value="åœºæ™¯åµŒå¥—">åœºæ™¯åµŒå¥—</option> <option value="æè¿‘ç‰¹å†™">æè¿‘ç‰¹å†™</option> <option value="ä¿¯è§†è§’åº¦">ä¿¯è§†è§’åº¦</option> <option value="ä»°è§†è§’åº¦">ä»°è§†è§’åº¦</option> </select>
        <label for="style_brand">è‰ºæœ¯/å“ç‰Œé£æ ¼ç±»</label>
        <select id="style_brand" name="style_brand"> <option value="">ï¼ˆä¸æŒ‡å®šï¼‰</option> <option value="ç”µå½±æ„Ÿ">ç”µå½±æ„Ÿ (Cinematic)</option> <option value="MUJI é£">MUJI é£</option> <option value="å®œå®¶é£æ ¼">å®œå®¶é£æ ¼</option> <option value="Apple äº§å“æ‘„å½±é£æ ¼">Apple é£æ ¼</option> <option value="Dyson è´¨æ„Ÿ">Dyson è´¨æ„Ÿ</option> <option value="æ—¥ç³»æ‚å¿—é£">æ—¥ç³»æ‚å¿—é£ (Kinfolk)</option> <option value="éŸ©ç³»ç”µå•†é£">éŸ©ç³»ç”µå•†é£</option> <option value="ç¾å¼è‡ªç„¶é£">ç¾å¼è‡ªç„¶é£</option> <option value="æ³•å¼å¤å¤é£">æ³•å¼å¤å¤é£</option> <option value="å›½æ½®é£">å›½æ½®é£</option> <option value="èµ›åšæœ‹å…‹">èµ›åšæœ‹å…‹ (Cyberpunk)</option> <option value="è’¸æ±½æœ‹å…‹">è’¸æ±½æœ‹å…‹ (Steampunk)</option> <option value="ä½å¤šè¾¹å½¢">ä½å¤šè¾¹å½¢ (Low Poly)</option> <option value="æ°´å½©ç”»é£">æ°´å½©ç”»é£</option> <option value="åƒç´ è‰ºæœ¯">åƒç´ è‰ºæœ¯ (Pixel Art)</option> <option value="å°ç±³ç³»é£æ ¼">å°ç±³ç³»é£æ ¼</option> <option value="Chanel æç®€é»‘ç™½é£">Chanel é»‘ç™½</option> <option value="å…¶ä»–">å…¶ä»–</option> </select>
         <label for="brand_other">å…¶ä»–å‚è€ƒå“ç‰Œ/é£æ ¼å¤‡æ³¨</label> <input type="text" id="brand_other" name="brand_other" placeholder="è‹¥ä¸Šæ–¹é€‰æ‹©â€œå…¶ä»–â€ï¼Œè¯·åœ¨æ­¤å¤„è¯¦ç»†è¯´æ˜">
    </div>

    <!-- Section 5: Copy Requirements (Dynamic) -->
    <div class="form-section">
        <h2>5. æ–‡æ¡ˆè¦æ±‚ (å¯é€‰, æœ€å¤š5æ¡)</h2>
        <p class="note">å¦‚éœ€åœ¨å›¾ç‰‡ä¸Šæ·»åŠ æ–‡å­—ï¼Œè¯·åœ¨æ­¤å¡«å†™ã€‚å¯æŒ‡å®šç»†èŠ‚ï¼Œæˆ–è®© AI è‡ªç”±å‘æŒ¥ã€‚</p>
        <div class="checkbox-container">
           <input type="checkbox" id="copy_ai_decide" name="copy_ai_decide" value="true">
           <label for="copy_ai_decide">ç”± AI å†³å®šæ–‡æ¡ˆçš„å­—ä½“ã€é¢œè‰²å’Œä½ç½®ï¼ˆè‹¥å‹¾é€‰ï¼Œä¸‹æ–¹å…·ä½“è®¾ç½®å°†å¤±æ•ˆï¼‰</label>
        </div>
        <div id="copy-container"></div>
        <button type="button" id="add-copy-btn" class="add-btn">æ·»åŠ æ–‡æ¡ˆ</button>
        <p id="copy-limit-msg" class="note" style="color: red; display: none; margin-top: 10px;">æœ€å¤šæ·»åŠ  5 æ¡æ–‡æ¡ˆã€‚</p>
    </div>

    <!-- Section 6: Technical Parameters -->
    <div class="form-section">
        <h2>6. æŠ€æœ¯å‚æ•°è®¾ç½®</h2>
        <label>å›¾åƒå°ºå¯¸ (åƒç´ )</label>
        <div class="dimension-inputs">
            <div> <label for="image_width">å®½åº¦</label> <input type="number" id="image_width" name="image_width" value="1024" min="128" max="1792" required> </div>
            <div> <label for="image_height">é«˜åº¦</label> <input type="number" id="image_height" name="image_height" value="1024" min="128" max="1792" required> </div>
        </div>
        <p class="note">é»˜è®¤ 1024x1024ã€‚GPT-4o æœ€å¤§å°ºå¯¸ï¼šé•¿è¾¹â‰¤1792px, çŸ­è¾¹â‰¤1024pxã€‚</p>
        <label for="num_images">å•æ¬¡ç”Ÿå›¾æ•°é‡</label>
        <input type="number" id="num_images" name="num_images" value="1" min="1" max="4" required>
        <p class="note">é»˜è®¤ç”Ÿæˆ 1 å¼ ã€‚æœ€å¤šå¯ç”Ÿæˆ 4 å¼ ä¾›é€‰æ‹©ã€‚</p>
        <div class="checkbox-container">
           <input type="checkbox" id="transparent_bg" name="transparent_bg" value="true">
           <label for="transparent_bg">éœ€è¦é€æ˜èƒŒæ™¯ (ç”Ÿæˆ PNG)</label>
        </div>
        <p class="note" style="margin-top: -10px; margin-bottom: 20px;">å‹¾é€‰åå°è¯•ç”Ÿæˆé€æ˜èƒŒæ™¯PNGã€‚</p>
    </div>

    <!-- Section 7: Other Requirements -->
    <div class="form-section">
        <h2>7. å…¶ä»–è¦æ±‚ä¸å¤‡æ³¨</h2>
        <label for="remarks">è¯¦ç»†æè¿°æˆ–è¡¥å……è¯´æ˜</label>
        <textarea id="remarks" name="remarks" rows="5" placeholder="ä¾‹å¦‚ï¼šå¸Œæœ›æ•´ä½“è‰²è°ƒåæš–ï¼›ç”»é¢éœ€è¦æœ‰æ¨¡ç³Šçš„èƒŒæ™¯äººç‰©ï¼›å¼ºè°ƒäº§å“çš„ç¯ä¿ææ–™ï¼›å¦‚æœæ–‡æ¡ˆä½ç½®é€‰äº†â€œå…¶ä»–â€ï¼Œè¯·åœ¨æ­¤è¯¦ç»†è¯´æ˜..."></textarea>
        <p class="note">æè¿°è¶Šå…·ä½“ï¼ŒAI ç”Ÿæˆæ•ˆæœè¶Šæ¥è¿‘é¢„æœŸã€‚</p>
    </div>

    <!-- Generate Button -->
    <button type="button" id="generate-prompt-btn" class="submit-btn">ç”Ÿæˆ Prompt</button>

  </form>

  <!-- Prompt Display Section (Initially Hidden) -->
  <div id="prompt-display-section" style="display: none;">
      <h3>ğŸ‰ Prompt ç”ŸæˆæˆåŠŸï¼</h3>
       <p class="user-instruction">
          è¯·å¤åˆ¶<strong style="color: #1b5e20;">ä¸‹æ–¹ç»¿è‰²æ¡†å†…çš„æ–‡æœ¬</strong>åç²˜è´´åˆ° <a href="https://chat.openai.com/" target="_blank">ChatGPT (GPT-4o)</a>ã€‚
       </p>
        <!-- Section to list files user needs to upload -->
        <div id="files-to-upload-section" style="display: none;"> <!-- Hide if no files needed -->
             <h4>è¯·åŠ¡å¿…åœ¨ ChatGPT ä¸­æ‰‹åŠ¨ä¸Šä¼ ä»¥ä¸‹æ–‡ä»¶ï¼š</h4>
             <ul id="files-to-upload-list"></ul>
        </div>

      <!-- The actual prompt text for ChatGPT goes here -->
      <pre id="prompt-output">...</pre>

      <div class="copy-btn-container">
          <button type="button" id="copy-prompt-btn" class="copy-btn"> <span class="copy-icon">ğŸ“„</span> ä¸€é”®å¤åˆ¶ Prompt æ–‡æœ¬</button>
      </div>
       <p id="post-generation-instructions">
           æ¥ä¸‹æ¥è¯·æ‰“å¼€ <a href="https://chat.openai.com/" target="_blank">ChatGPT</a>ï¼Œé€‰æ‹© GPT-4o æ¨¡å‹ï¼Œç²˜è´´ä¸Šæ–¹æ–‡æœ¬ï¼Œå¹¶<strong>æ‰‹åŠ¨ä¸Šä¼ æ‰€éœ€æ–‡ä»¶</strong>åå†å‘é€ã€‚
       </p>
       <p class="note" style="text-align:center; margin-top: 15px;">è¯·åŸºäºè¿™äº›ä¿¡æ¯åˆæˆå›¾åƒï¼Œä¿æŒçœŸå®æ„Ÿå’Œäº§å“æ¯”ä¾‹ï¼Œé¿å…è´´å›¾æ„Ÿæˆ–è™šå‡å…‰å½±ã€‚è°¢è°¢ï¼</p> <!-- This final note is for the user -->
  </div>


<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('image-gen-form');

    // --- Helper Function to Get Optional Element Value ---
    function getElementValue(id, defaultValue = '') { /* ... same ... */ return document.getElementById(id) ? document.getElementById(id).value.trim() : defaultValue; }
    // --- Helper Function to Get File Name ---
    function getFileName(id) { /* ... same ... */ const el = document.getElementById(id); return el && el.files.length > 0 ? el.files[0].name : ''; } // Return empty string if no file

    // --- Product Logic ---
    const productContainer = document.getElementById('product-container');
    const addProductBtn = document.getElementById('add-product-btn');
    const productLimitMsg = document.getElementById('product-limit-msg');
    const productRelationsContainer = document.getElementById('product_relations_container');
    const maxProducts = 5; let productCount = 1;
    function updateAddProductButtonState() { /* ... same ... */ addProductBtn.disabled = productCount >= maxProducts; productLimitMsg.style.display = productCount >= maxProducts ? 'block' : 'none'; productRelationsContainer.style.display = productCount > 1 ? 'block' : 'none'; }
    addProductBtn.addEventListener('click', function() { // Modified for single PNG
         if (productCount >= maxProducts) return;
        productCount++; const productIndex = productCount; const newItem = document.createElement('div'); newItem.classList.add('product-item'); newItem.setAttribute('data-index', productIndex);
        const nameInputId = `product_name_${productIndex}`;
        const pngInputId = `product_png_${productIndex}`; // Back to single PNG id
        const modelInputId = `model_file_${productIndex}`;
        newItem.innerHTML = `
            <button type="button" class="remove-btn">ç§»é™¤</button> <h4>äº§å“ ${productIndex}</h4>
            <label for="${nameInputId}">äº§å“ ${productIndex} åç§°</label> <input type="text" id="${nameInputId}" name="product_name_${productIndex}" placeholder="è¾“å…¥äº§å“ ${productIndex} åç§°">
            <label for="${pngInputId}">ä¸Šä¼ äº§å“ ${productIndex} é€æ˜å›¾ (PNG)</label> <input type="file" id="${pngInputId}" name="${pngInputId}" accept="image/png"> <p class="note">éœ€é€æ˜èƒŒæ™¯PNGã€‚</p>
            <label for="${modelInputId}" style="margin-top: 15px;">ä¸Šä¼ äº§å“ ${productIndex} 3Dæ¨¡å‹ï¼ˆå¯é€‰ï¼‰</label> <input type="file" id="${modelInputId}" name="model_file_${productIndex}" accept=".zip,.glb,.fbx,.obj,.mtl">`;
        newItem.querySelector('.remove-btn').addEventListener('click', function() { if (productCount <= 1) return; newItem.remove(); productCount--; updateAddProductButtonState(); });
        productContainer.appendChild(newItem); updateAddProductButtonState();
    });
    updateAddProductButtonState();

    // --- Reference Image Logic --- (No changes needed here)
    /* ... Reference logic remains the same ... */
    const referenceContainer = document.getElementById('reference-container'); const addReferenceBtn = document.getElementById('add-reference-btn'); const referenceLimitMsg = document.getElementById('reference-limit-msg'); const maxReferences = 10; let referenceCount = 0; function updateAddReferenceButtonState() { addReferenceBtn.disabled = referenceCount >= maxReferences; referenceLimitMsg.style.display = referenceCount >= maxReferences ? 'block' : 'none';} addReferenceBtn.addEventListener('click', function() { if (referenceCount >= maxReferences) return; referenceCount++; const referenceIndex = referenceCount; const newItem = document.createElement('div'); newItem.classList.add('reference-item'); const fileInputId = `ref_file_${referenceIndex}`; const urlInputId = `ref_url_${referenceIndex}`; const notesInputId = `ref_notes_${referenceIndex}`; newItem.innerHTML = `<button type="button" class="remove-btn">ç§»é™¤</button> <h4>å‚è€ƒå›¾ ${referenceIndex}</h4> <p class="note">ä¸Šä¼ æ–‡ä»¶æˆ–è¾“å…¥é“¾æ¥ï¼ˆäºŒé€‰ä¸€ï¼‰ã€‚</p> <label for="${fileInputId}">ä¸Šä¼ æ–‡ä»¶</label> <input type="file" id="${fileInputId}" name="reference_file_${referenceIndex}" accept="image/*"> <label for="${urlInputId}">æˆ– è¾“å…¥é“¾æ¥</label> <input type="url" id="${urlInputId}" name="reference_url_${referenceIndex}" placeholder="https://..."> <label for="${notesInputId}">å‚è€ƒè¯´æ˜</label> <textarea id="${notesInputId}" name="reference_notes_${referenceIndex}" rows="3" placeholder="ä¾‹å¦‚ï¼šå‚è€ƒæ­¤å›¾è‰²è°ƒ..."></textarea>`; newItem.querySelector('.remove-btn').addEventListener('click', function() { newItem.remove(); referenceCount--; updateAddReferenceButtonState(); }); referenceContainer.appendChild(newItem); updateAddReferenceButtonState(); }); updateAddReferenceButtonState();

    // --- Copy Requirements Logic --- (No changes needed here)
    /* ... Copy logic remains the same ... */
    const copyContainer = document.getElementById('copy-container'); const addCopyBtn = document.getElementById('add-copy-btn'); const copyLimitMsg = document.getElementById('copy-limit-msg'); const aiDecideCheckbox = document.getElementById('copy_ai_decide'); const maxCopyLines = 5; let copyCount = 0; function toggleCopyControls(disabled) { const copyItems = copyContainer.querySelectorAll('.copy-item'); copyItems.forEach(item => { item.querySelectorAll('.copy-controls input, .copy-controls select').forEach(control => { control.disabled = disabled; }); }); } function updateAddCopyButtonState() { addCopyBtn.disabled = copyCount >= maxCopyLines; copyLimitMsg.style.display = copyCount >= maxCopyLines ? 'block' : 'none'; } aiDecideCheckbox.addEventListener('change', function() { toggleCopyControls(this.checked); }); addCopyBtn.addEventListener('click', function() { if (copyCount >= maxCopyLines) return; copyCount++; const copyIndex = copyCount; const newItem = document.createElement('div'); newItem.classList.add('copy-item'); const textInputId = `copy_text_${copyIndex}`; const fontInputId = `copy_font_${copyIndex}`; const colorInputId = `copy_color_${copyIndex}`; const positionInputId = `copy_position_${copyIndex}`; newItem.innerHTML = `<button type="button" class="remove-btn">ç§»é™¤</button> <h4>æ–‡æ¡ˆ ${copyIndex}</h4> <label for="${textInputId}">å†…å®¹</label> <textarea id="${textInputId}" name="copy_text_${copyIndex}" rows="2" placeholder="è¾“å…¥æ–‡å­—" required></textarea> <div class="copy-controls"> <div> <label for="${fontInputId}">å­—ä½“</label> <input type="text" id="${fontInputId}" name="copy_font_${copyIndex}" placeholder="å¦‚: é»‘ä½“"> </div> <div> <label for="${colorInputId}">é¢œè‰²</label> <input type="color" id="${colorInputId}" name="copy_color_${copyIndex}" value="#333333"> </div> <div> <label for="${positionInputId}">ä½ç½®</label> <select id="${positionInputId}" name="copy_position_${copyIndex}"> <option value="">ä¸æŒ‡å®š</option> <option value="top_left">å·¦ä¸Š</option> <option value="top_center">é¡¶ä¸­</option> <option value="top_right">å³ä¸Š</option> <option value="middle_left">ä¸­å·¦</option> <option value="center">æ­£ä¸­</option> <option value="middle_right">ä¸­å³</option> <option value="bottom_left">å·¦ä¸‹</option> <option value="bottom_center">åº•ä¸­</option> <option value="bottom_right">å³ä¸‹</option> <option value="other">å…¶ä»–</option> </select> </div> </div>`; newItem.querySelector('.remove-btn').addEventListener('click', function() { newItem.remove(); copyCount--; updateAddCopyButtonState(); }); copyContainer.appendChild(newItem); toggleCopyControls(aiDecideCheckbox.checked); updateAddCopyButtonState(); }); updateAddCopyButtonState(); toggleCopyControls(aiDecideCheckbox.checked);

    // --- Generate Prompt Logic ---
    const generateBtn = document.getElementById('generate-prompt-btn');
    const promptOutput = document.getElementById('prompt-output'); // The <pre> tag for ChatGPT text
    const promptDisplaySection = document.getElementById('prompt-display-section'); // The whole results area
    const filesToUploadList = document.getElementById('files-to-upload-list'); // The <ul> for file list
    const filesToUploadSection = document.getElementById('files-to-upload-section'); // The container div for file list
    const copyBtn = document.getElementById('copy-prompt-btn');

    generateBtn.addEventListener('click', function() {
        // Validation for first product PNG
        if (!getElementValue('product_name_1') || !getFileName('product_png_1')) { // Check if filename is empty
             alert('è¯·è‡³å°‘å¡«å†™äº§å“1çš„åç§°å¹¶ä¸Šä¼ äº§å“1çš„é€æ˜å›¾ï¼');
             document.getElementById('product_name_1').focus();
             return;
        }

        let promptForChatGPT = ""; // This string goes into the <pre> tag
        let filesForUserUpload = []; // Array to store filenames for the user list

        // 1. äº§å“ä¿¡æ¯
        promptForChatGPT += "ã€äº§å“ä¿¡æ¯ã€‘\n";
        const productItems = productContainer.querySelectorAll('.product-item');
        productItems.forEach((item, index) => {
            const i = index + 1;
            const productName = getElementValue('product_name_' + i);
            const pngFileName = getFileName('product_png_' + i); // Use single PNG field ID
            if (!productName && i > 1 && !pngFileName) {
                return; // Skip empty extra product slots
            }
            promptForChatGPT += `- äº§å“ ${i} åç§°: ${productName || '(æœªå¡«å†™)'}\n`;

            if (pngFileName) {
                promptForChatGPT += `  - äº§å“å›¾æ–‡ä»¶: ${pngFileName}\n`; // Add filename to prompt
                filesForUserUpload.push(`äº§å“ ${i} é€æ˜å›¾: ${pngFileName}`); // Add to user list
            } else if (i === 1){
                 promptForChatGPT += `  - äº§å“å›¾æ–‡ä»¶: (å¿…éœ€ - ä½†æœªæ£€æµ‹åˆ°æ–‡ä»¶)\n`; // Should not happen
            }

            const modelFileName = getFileName('model_file_' + i);
            if (modelFileName) {
                 promptForChatGPT += `  - 3Dæ¨¡å‹æ–‡ä»¶: ${modelFileName}\n`; // Add filename to prompt
                 filesForUserUpload.push(`äº§å“ ${i} 3Dæ¨¡å‹: ${modelFileName}`); // Add to user list
            }
        });
        if (productCount > 1) {
             const relations = getElementValue('product_relations'); if (relations) { promptForChatGPT += "\nã€å¤šäº§å“å…³ç³»ä¸å¸ƒå±€ã€‘\n" + relations + "\n"; }
        }
        promptForChatGPT += "\n";

        // 2. å‚è€ƒå›¾
        const refItems = referenceContainer.querySelectorAll('.reference-item');
        if (refItems.length > 0) {
            promptForChatGPT += "ã€å‚è€ƒå›¾/é“¾æ¥åŠè¯´æ˜ã€‘\n";
            refItems.forEach((item, index) => {
                const i = index + 1;
                const refFile = getFileName(`ref_file_${i}`);
                const refUrl = getElementValue(`ref_url_${i}`);
                const refNotes = getElementValue(`ref_notes_${i}`);
                let hasRefSource = false;
                if (refFile || refUrl || refNotes) { // Only add section if there's some info
                     promptForChatGPT += `- å‚è€ƒ ${i}:\n`;
                     if (refFile) {
                         promptForChatGPT += `  - æ–‡ä»¶: ${refFile}\n`; // Add filename to prompt
                         filesForUserUpload.push(`å‚è€ƒå›¾ ${i}: ${refFile}`); // Add to user list
                         hasRefSource = true;
                     } else if (refUrl) {
                         promptForChatGPT += `  - é“¾æ¥: ${refUrl}\n`; // Link is fine for prompt
                         hasRefSource = true;
                     }
                      if (refNotes) {
                         promptForChatGPT += `  - è¯´æ˜: ${refNotes}\n`;
                     }
                      if (!hasRefSource && !refNotes){ // Edge case: item added but nothing filled
                          promptForChatGPT += `  - (æ— æœ‰æ•ˆä¿¡æ¯)\n`;
                      }
                }
            });
             promptForChatGPT += "\n";
        }

        // 3. å›¾åƒç”¨é€” (No changes needed in prompt generation logic)
        /* ... */
         const purpose = getElementValue('scene_purpose'); const purposeOther = getElementValue('purpose_other'); promptForChatGPT += "ã€å›¾åƒç”¨é€”ã€‘\n"; promptForChatGPT += `- ä¸»è¦ç”¨é€”: ${purpose}\n`; if (purpose === 'å…¶ä»–' && purposeOther) { promptForChatGPT += `  - å…¶ä»–è¯´æ˜: ${purposeOther}\n`; } promptForChatGPT += "\n";

        // 4. èƒŒæ™¯ä¸é£æ ¼ (No changes needed in prompt generation logic)
        /* ... */
         const bgStyle = getElementValue('background_style'); const bgOther = getElementValue('background_other'); promptForChatGPT += "ã€èƒŒæ™¯é£æ ¼ã€‘\n"; promptForChatGPT += `- é£æ ¼: ${bgStyle}\n`; if (bgStyle === 'å…¶ä»–' && bgOther) { promptForChatGPT += `  - å…¶ä»–è¯´æ˜: ${bgOther}\n`; } const styleKeywords = [ getElementValue('style_space'), getElementValue('style_light'), getElementValue('style_composition'), getElementValue('style_brand') ].filter(Boolean); if (styleKeywords.length > 0) { promptForChatGPT += "\nã€å›¾ç‰‡é£æ ¼å…³é”®è¯ã€‘\n- " + styleKeywords.join(" / ") + "\n"; } const brandOther = getElementValue('brand_other'); if (getElementValue('style_brand') === 'å…¶ä»–' && brandOther) { promptForChatGPT += `  - å…¶ä»–å“ç‰Œ/é£æ ¼è¯´æ˜: ${brandOther}\n`; } promptForChatGPT += "\n";


        // 5. æ–‡æ¡ˆè¦æ±‚ (No changes needed in prompt generation logic)
        /* ... */
        const copyItems = copyContainer.querySelectorAll('.copy-item'); let copySectionContent = "";
        if (aiDecideCheckbox.checked) { copySectionContent += "- ç”± AI å†³å®šå­—ä½“ã€é¢œè‰²å’Œä½ç½®ã€‚\n"; if (copyItems.length > 0) { let texts = []; copyItems.forEach((item, index) => { const copyText = getElementValue('copy_text_' + (index + 1)); if(copyText) { texts.push(`"${copyText}"`); } }); if (texts.length > 0) { copySectionContent += `  - æ–‡æ¡ˆå†…å®¹å¦‚ä¸‹ (è¯·AIæ’ç‰ˆ): ${texts.join(', ')}\n`; } } } else if (copyItems.length > 0) { let hasContent = false; copyItems.forEach((item, index) => { const i = index + 1; const text = getElementValue(`copy_text_${i}`); if (!text) return; hasContent = true; const font = getElementValue(`copy_font_${i}`); const color = getElementValue(`copy_color_${i}`); const positionSelect = document.getElementById(`copy_position_${i}`); const positionValue = positionSelect ? positionSelect.value : ''; const positionText = positionSelect && positionValue ? positionSelect.options[positionSelect.selectedIndex].text : ''; copySectionContent += `- æ–‡æ¡ˆ ${i}: "${text}"\n`; if (font) copySectionContent += `  - å­—ä½“å»ºè®®: ${font}\n`; if (color !== '#333333') copySectionContent += `  - é¢œè‰²å»ºè®®: ${color}\n`; if (positionValue) copySectionContent += `  - ä½ç½®å»ºè®®: ${positionValue === 'other' ? 'å…¶ä»–(è§ä¸‹æ–¹å¤‡æ³¨)' : positionText}\n`; }); if (!hasContent && copyItems.length > 0) { copySectionContent += "- (æ— æœ‰æ•ˆæ–‡æ¡ˆå†…å®¹å¡«å†™)\n"; } } if (copySectionContent) { promptForChatGPT += "ã€æ–‡æ¡ˆè¦æ±‚ã€‘\n" + copySectionContent + "\n"; }


        // 6. æŠ€æœ¯å‚æ•° (No changes needed in prompt generation logic)
        /* ... */
         const width = getElementValue('image_width'); const height = getElementValue('image_height'); const numImages = getElementValue('num_images'); const transparent = document.getElementById('transparent_bg').checked; promptForChatGPT += "ã€æŠ€æœ¯è§„æ ¼ã€‘\n"; promptForChatGPT += `- å°ºå¯¸: ${width} x ${height} åƒç´ \n`; promptForChatGPT += `- æ•°é‡: ${numImages} å¼ \n`; promptForChatGPT += `- èƒŒæ™¯: ${transparent ? 'éœ€è¦é€æ˜èƒŒæ™¯ (PNG)' : 'ä¸éœ€è¦é€æ˜èƒŒæ™¯'}\n\n`;

        // 7. å…¶ä»–å¤‡æ³¨ (No changes needed in prompt generation logic)
        /* ... */
         const remarks = getElementValue('remarks'); if (remarks) { promptForChatGPT += "ã€å…¶ä»–å¤‡æ³¨ã€‘\n" + remarks + "\n\n"; }


        // --- Display logic ---
        // Display the clean prompt for ChatGPT in the <pre> tag
        promptOutput.textContent = promptForChatGPT.trim(); // Use trim() to remove trailing newlines

        // Populate the user file list
        filesToUploadList.innerHTML = ''; // Clear previous list
        if (filesForUserUpload.length > 0) {
            filesForUserUpload.forEach(fileInfo => {
                const li = document.createElement('li');
                // Extract filename for styling
                const parts = fileInfo.split(': ');
                if (parts.length === 2) {
                    li.innerHTML = `${parts[0]}: <code>${parts[1]}</code>`;
                } else {
                    li.textContent = fileInfo; // Fallback
                }
                filesToUploadList.appendChild(li);
            });
            filesToUploadSection.style.display = 'block'; // Show the file list section
        } else {
            filesToUploadSection.style.display = 'none'; // Hide if no files to upload
        }

        // Show the entire results section
        promptDisplaySection.style.display = 'block';
        promptDisplaySection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    // --- Copy Prompt Logic ---
    copyBtn.addEventListener('click', function() {
        const textToCopy = promptOutput.textContent; // Copy only the text from <pre>
        navigator.clipboard.writeText(textToCopy).then(() => {
            const originalText = copyBtn.innerHTML; copyBtn.innerHTML = '<span class="copy-icon">âœ…</span> å·²å¤åˆ¶!'; copyBtn.style.backgroundColor = '#4cae4c';
            setTimeout(() => { copyBtn.innerHTML = originalText; copyBtn.style.backgroundColor = '#5cb85c'; }, 2000);
        }).catch(err => { console.error('æ— æ³•å¤åˆ¶æ–‡æœ¬: ', err); alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ã€‚'); });
    });

  });
</script>

</body>
</html>